<!DOCTYPE html>
<html lang="en">
  <head>
    <%- include('partials/head') %>
  </head>
  <body>
    <%- include('partials/header') %>
    <main class="flex min-h-screen flex-col items-center justify-start p-24 pt-14 bg-pattern">
      <div class="w-full max-w-2xl space-y-8">
        <h2 class="text-3xl font-bold text-center text-white">Messages</h2>
        <div class="space-y-4">
          <% allMessage.reverse().forEach((message) => { %>
          <div key="{message.id}" class="rounded-xl bg-gray-800 bg-opacity-50 p-6 backdrop-filter backdrop-blur-lg border border-purple-300 border-opacity-20">
            <h3 class="text-2xl font-semibold text-purple-200 text-center">
              <%= message.headline %>
            </h3>
            <p class="mt-2 text-gray-300"><%= message.description %></p>
            <% if (locals.user.memberstatus == "Member" || locals.user.isadmin) { %>
            <div class="flex items-center justify-between mt-3 text-gray-400">
              <p>From: <%= message.username %></p>
              <p>
                <%= new Date(message.timecreated).toLocaleString('en-US', { timeZone: 'Asia/Bangkok', hour12: true }) %>
              </p>
            </div>
            <% } else { %>
            <div class="flex items-center justify-between mt-3 text-gray-400">
              <p>From: Anonymous</p>
              <p>
               Sent: Anonymous
              </p>
            </div>
            <% } %>
            <% if (message.userid == locals.user.id || locals.user.isadmin) { %>
            <div class="mt-4 flex space-x-4">
              <button class="text-blue-500 hover:text-blue-400">
                <i class="fa-solid fa-pen-to-square"></i> Edit
              </button>
              <button class="text-red-500 hover:text-red-400">
                <i class="fa-solid fa-trash-can"></i> Delete
              </button>
            </div>
            <% } %>
          </div>
          <% }) %>
        </div>
      </div>
    </main>



    <script>

    </script>
  </body>
</html>